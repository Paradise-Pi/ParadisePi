<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; img-src 'self' data:;">
    <meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; img-src 'self' data:;">
    <link type="text/css" rel="stylesheet" href="assets/style.css">
    <title>Paradise Pi</title>
  </head>
  <body>
    <div id="page">
      <table id="menu">
        <tr>
          <td data-tab="1" rowspan="2" id="lxTab">Lighting</td>
          <td data-tab="4" rowspan="2" id="sndTab">Sound</td>
          <td data-tab="5" rowspan="2" id="adminTab">Admin</td>
          <td class="pad" rowspan="2">
            <span id="SNDStatusIcon">Sound &#x25cf;</span>
            <br/><img src="assets/lock.png" id="lockIcon" /><img src="assets/sync-solid.png" id="rebootIcon" />
          </td>
          <td id="allOff"><b>ALL OFF</b></td>
        </tr>
      </table>
      <div id="container">
        <div class="tab" data-tab="1">
          <div id="LXInfo" class="info"></div>
          <div class="container">
            <div class="button-container"  id="lxContainer">
              <!-- Folders & Buttons generated on load -->
            </div>
          </div>
        </div>
        <div class="tab" data-tab="2">
          <div class="keypad-wrapper">
            <div class="keypad-container">
              <table class="keypad">
                <tr>
                  <td colspan="3"><input type="text" id="keypad-output" readonly></td>
                </tr>
                <tr>
                  <td><button class="keypad-key" data-key="7">7</button></td>
                  <td><button class="keypad-key" data-key="8">8</button></td>
                  <td><button class="keypad-key" data-key="9">9</button></td>
                </tr>
                <tr>
                  <td><button class="keypad-key" data-key="4">4</button></td>
                  <td><button class="keypad-key" data-key="5">5</button></td>
                  <td><button class="keypad-key" data-key="6">6</button></td>
                </tr>
                <tr>
                  <td><button class="keypad-key" data-key="1">1</button></td>
                  <td><button class="keypad-key" data-key="2">2</button></td>
                  <td><button class="keypad-key" data-key="3">3</button></td>
                </tr>
                <tr>
                  <td><button class="keypad-clear">Clear</button></td>
                  <td><button class="keypad-key" data-key="0">0</button></td>
                  <td><button class="keypad-key" data-key=" thru ">Thru</button></td>
                </tr>
              </table>
            </div>
            <div class="right-fader">
              <input id="intensityFader" class="fader" type="range" max="255" value="0" disabled>
            </div>
          </div>
        </div>
        <div class="tab" data-tab="3">
          <div class="keypad-wrapper">
            <div class="keypad-container">
              <table class="keypad">
                <tr>
                  <td><button class="keypad-key" id="check-prev">Previous</button></td>
                  <td><div class="keypad-output" id="check-text">Off</div></td>
                  <td><button class="keypad-key" id="check-next">Next</button></td>
                </tr>
                <tr>
                  <td><button class="keypad-key" id="check-off">Off</button></td>
                  <td></td>
                  <td><button class="keypad-key" id="check-all">All</button></td>
                </tr>
              </table>
            </div>
          </div>
          
        </div>
        <div class="tab" data-tab="4">
          <div id="SNDInfo" class="info"></div>
          <div class="button-container" id="sndContainer">
            <!-- Buttons generated on load -->
          </div>
          <div class="button-container" id="sndFaders">
            <!-- Faders generated on Load -->
          </div>
        </div>
        <div class="tab" data-tab="5">
          <table>
            <tr>
              <td>
                <div class="button-container">
                  <button type="button" id="deviceLockButton" onclick="adminFunctions('lock')">Lock</button>
                  <button type="button" onclick="adminFunctions('reboot')">Reboot</button>
                  <button type="button" onclick="modalShow('about')">About</button>

                  <button type="button" class="bnt-amx" onclick="adminFunctions('devTools')">Developer Mode</button>
                  <button type="button" onclick="adminFunctions('exit')">Exit to OS</button>
                </div>
                <div id="SNDStatusDetails"></div>
              </td>
              <td>
                <h2>Admin Interface</h2>
                <div id="adminQRCode"></div>
                <p id="adminURL"></p>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <div id="allOffModal" class="modal" data-timeout="10">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h1>Turning Lights off and Muting Audio</h1>
        <p>Lights not turning off? Ensure that the Lighting Control Computer/Lighting Desk is powered off</p>
      </div>
    </div>
    <div id="lockedWarning" class="modal" data-timeout="5">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h1>Device Locked</h1>
        <p>Sorry this device is locked, so you cannot complete this action</p>
      </div>
    </div>
    <div id="about" class="modal" data-timeout="0">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h1>Paradise</h1>
        <p>Developed by John Cherry (johncherry.me) &amp; James Bithell (jbithell.com) for the University of York Drama Society, as part of a project to install a new Control System, Facility Panels &amp; Dimmers in February 2021.</p>
         <p><b>Legal Note: </b>Licensed under the GNU General Public License v3.0. Any similarities to ETC's Unison Paradigm&reg; System or the University of York's AMX Panel design is purely coincidental</p>
      </div>
    </div>

    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="assets/jquery-3.5.1.min.js"></script>
    <script src="assets/qrcode.min.js"></script>
    <script>if (window.module) module = window.module;</script>
    <script src="./renderer.js"></script>
  </body>
</html>
