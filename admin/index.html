<!DOCTYPE html>
<!--
* CoreUI - Free Bootstrap Admin Template
* @version v3.4.0
* @link https://coreui.io
* Copyright (c) 2020 creativeLabs Åukasz Holeczek
* Licensed under MIT (https://coreui.io/license)
-->

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Paradise Admin</title>
    <link href="assets/css/coreui.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
</head>
<body class="c-app">
<div class="c-sidebar c-sidebar-dark c-sidebar-fixed c-sidebar-lg-show" id="sidebar">
    <div class="c-sidebar-brand d-lg-down-none">
        <h2>Paradise<strong>Pi</strong></h2>
    </div>
    <ul class="c-sidebar-nav">
        <li class="c-sidebar-nav-title">Folders</li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="#lightingfolders-anchor">Lighting</a></li>
        <li class="c-sidebar-nav-title">Presets</li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="#lightingpresets-anchor">Lighting</a></li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="#soundpresets-anchor">Sound</a></li>
        <li class="c-sidebar-nav-title">Faders</li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="#soundfaders-anchor">Sound</a></li>
        <li class="c-sidebar-nav-title">Settings</li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="#settings-anchor">General</a></li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="#backuprestore-anchor">Backup, Restore &amp; Reset</a></li>
        <li class="c-sidebar-nav-item mt-auto"><a class="c-sidebar-nav-link" href="#status" id="status-menuStatus">Connected</a></li>
    </ul>
</div>
<div class="c-wrapper c-fixed-components">
    <header class="c-header c-header-light c-header-fixed c-header-with-subheader" id="statusBar-statusHeader">
        <button class="c-header-toggler c-class-toggler d-lg-none mfe-auto" type="button" data-target="#sidebar"
                data-class="c-sidebar-show">
            <i class="fa fa-bars"></i>
            
        </button>
        <div class="c-header-brand" id="statusBar-statusTextBox">Reboot required to propagate changes <button type="button" id="reboot" class="ml-1 btn btn-secondary btn-sm">Reboot</button></div>
    </header>
    <div class="c-body">
        <main class="c-main">
            <div class="container-fluid">
                <div id="lightingFolders">
                    <a class="anchor" id="lightingfolders-anchor"></a>
                    <h2>Lighting Preset Folders</h2>
                    <hr>
                    <button type="button" class="btn btn-primary" id="lxFolderNew">Add New</button>
                    <div id="LXPresetFolderList" class="d-flex flex-fill flex-wrap" style="margin-top: 10px;">
                    
                    </div>
                </div>
                <div>
                    <a class="anchor" id="lightingpresets-anchor"></a>
                    <h2>Lighting Presets</h2>
                    <hr>
                    <button type="button" class="btn btn-primary" id="lxNew">Add New</button>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#lxSampleModeModal">
                        Sample from Lighting Desk
                    </button>
                    <div id="LXPresetList" class="d-flex flex-fill flex-wrap" style="margin-top: 10px;">

                    </div>
                </div>
                <div>
                    <a class="anchor" id="soundpresets-anchor"></a>
                    <h2>Sound Presets</h2>
                    <hr>
                    <button type="button" class="btn btn-primary" id="sndNew">Add New</button>
                    <br>
                    <div id="SNDPresetList" class="d-flex flex-fill flex-wrap" style="margin-top: 10px;">

                    </div>
                    <br>
                </div>
                <div>
                    <a class="anchor" id="soundfaders-anchor"></a>
                    <h2>Sound Faders</h2>
                    <hr>
                    <button type="button" class="btn btn-primary" id="fdrNew">Add New</button>
                    <br>
                    <div id="SNDFaderList" class="d-flex flex-fill flex-wrap" style="margin-top: 10px;">

                    </div>
                    <br>
                </div>
                <div>
                    <a class="anchor" id="settings-anchor"></a>
                    <h2>Settings</h2>
                    <hr/>
                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="card" id="settings-config">
                                <div class="card-header"><strong>General</strong> <small>Settings</small></div>
                                <div class="card-body">
                                    <form class="settings-form" data-table="config">

                                    </form>
                                </div>
                            </div>
                            <div class="card" id="settings-LXConfig">
                                <div class="card-header"><strong>Lighting</strong> <small>Settings</small></div>
                                <div class="card-body">
                                    <form class="settings-form" data-table="LXConfig">

                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="card">
                                <div class="card-header"><strong>Version</strong> Information</div>
                                <div class="card-body" id="settings-version-box">

                                </div>
                            </div>
                            <div class="card" id="settings-SNDConfig">
                                <div class="card-header"><strong>Sound</strong> <small>Settings</small></div>
                                <div class="card-body">
                                    <form class="settings-form" data-table="SNDConfig">

                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr/>
                <div>
                    <a class="anchor" id="backuprestore-anchor"></a>
                    <h2>Backup, Restore &amp; Reset</h2>
                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="card">
                                <div class="card-header"><strong>Restore</strong> from Backup</div>
                                <div class="card-body">
                                    <p>Caution! Ensure you are uploading a valid backup file from Paradise. This file will not be checked before being set as the device config!</p>
                                    <form action="fileupload" method="post" enctype="multipart/form-data">
                                        <input class="form-control" type="file" name="filetoupload" accept=".sqlite,.sqlite3">
                                        <button class="btn btn-sm btn-success" style="margin:10px;" type="submit">Upload</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="card">
                                <div class="card-header"><strong>Backup</strong></div>
                                <div class="card-body">
                                    <a href="database.sqlite">Download Database Backup</a>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header"><strong>Factory</strong> Reset</div>
                                <div class="card-body">
                                    <button type="button" class="btn btn-danger btn-sm" id="factoryreset">Restore to Factory Settings</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr/>
                <div id="status">
                    <h2>Status</h2>
                    <p id="status-textStatus"></p>
                </div>

            </div>
        </main>
        <footer class="c-footer">
            <div>&copy;2021 John Cherry &amp; James Bithell</div>
            <div class="ml-auto">Theme by&nbsp;<a href="https://coreui.io/" target="_blank">CoreUI</a></div>
        </footer>
    </div>


    <div class="modal" tabindex="-1" role="dialog" id="lxSampleModeModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Sample Mode</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>
                        Entering sampling mode will disable all output from Paradise, and will trawl through universes 1-20 (inclusive) to detect lighting data.
                    </p>
                    <p>
                        It will skip universes where the output from the lighting desk is not static (ie an effect is running), because Paradise does not support playback of effects. This means the output from the lighting desk must be constant for the entire time Paradise is in sample mode.
                    </p>
                    <p>
                        For each universe it detects static data for it will create a new preset, which you can then rename/edit/delete as necessary.
                    </p>
                    <p>
                        <b>This process cannot be cancelled once started, and this interface will be inoperative during it.</b>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="lxSampleMode">Confirm</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="assets/js/jquery-3.5.1.min.js"></script>
<script src="assets/js/coreui.bundle.min.js"></script>
<script src="assets/js/socket.io.min.js"></script>
<script src="main.js"></script>
</body>
</html>
